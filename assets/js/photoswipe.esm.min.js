// From https://github.com/dimsemenov/PhotoSwipe

/*!
  * PhotoSwipe 5.2.8 - https://photoswipe.com
  * (c) 2022 Dmytro Semenov
  */
function t(aa,ac,ab){let Q=document.createElement(ac||"div");return aa&&(Q.className=aa),ab&&ab.appendChild(Q),Q}function i(Q,aa){return Q.x=aa.x,Q.y=aa.y,void 0!==aa.id&&(Q.id=aa.id),Q}function s(Q){Q.x=Math.round(Q.x),Q.y=Math.round(Q.y)}function h(Q,aa){let ab=Math.abs(Q.x-aa.x),ac=Math.abs(Q.y-aa.y);return Math.sqrt(ab*ab+ac*ac)}function e(Q,aa){return Q.x===aa.x&&Q.y===aa.y}function n(Q,aa,ab){return Math.min(Math.max(Q,aa),ab)}function o(ab,ac,Q){let aa="translate3d("+ab+"px,"+(ac||0)+"px,0)";return void 0!==Q&&(aa+=" scale3d("+Q+","+Q+",1)"),aa}function r(Q,aa,ab,ac){Q.style.transform=o(aa,ab,ac)}function a(aa,Q,ab,ac){aa.style.transition=Q?Q+" "+ab+"ms "+(ac||"cubic-bezier(.4,0,.22,1)"):"none"}function c(ab,Q,aa){ab.style.width="number"==typeof Q?Q+"px":Q,ab.style.height="number"==typeof aa?aa+"px":aa}let l="idle",p="loading",u="loaded",d="error",m=!1;try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get(){m=!0}}))}catch(Q){}class f{constructor(){this.t=[]}add(Q,aa,ab,ac){this.i(Q,aa,ab,ac)}remove(Q,aa,ab,ac){this.i(Q,aa,ab,ac,!0)}removeAll(){this.t.forEach(Q=>{this.i(Q.target,Q.type,Q.listener,Q.passive,!0,!0)}),this.t=[]}i(Q,aa,ac,ad,ab,ae){if(!Q)return;let af=ab?"removeEventListener":"addEventListener";aa.split(" ").forEach(aa=>{if(aa){ae||(ab?this.t=this.t.filter(ab=>ab.type!==aa||ab.listener!==ac||ab.target!==Q):this.t.push({target:Q,type:aa,listener:ac,passive:ad}));let ag=!!m&&{passive:ad||!1};Q[af](aa,ac,ag)}})}}function w(Q,ab){if(Q.getViewportSizeFn){let aa=Q.getViewportSizeFn(Q,ab);if(aa)return aa}return{x:document.documentElement.clientWidth,y:window.innerHeight}}function g(aa,Q,ad,ae,af){let ab;if(Q.paddingFn)ab=Q.paddingFn(ad,ae,af)[aa];else if(Q.padding)ab=Q.padding[aa];else{let ac="padding"+aa[0].toUpperCase()+aa.slice(1);Q[ac]&&(ab=Q[ac])}return ab||0}function _(aa,Q,ab,ac){return{x:Q.x-g("left",aa,Q,ab,ac)-g("right",aa,Q,ab,ac),y:Q.y-g("top",aa,Q,ab,ac)-g("bottom",aa,Q,ab,ac)}}class v{constructor(Q){this.slide=Q,this.currZoomLevel=1,this.center={},this.max={},this.min={},this.reset()}update(Q){this.currZoomLevel=Q,this.slide.width?(this.o("x"),this.o("y"),this.slide.pswp.dispatch("calcBounds",{slide:this.slide})):this.reset()}o(Q){let{pswp:ad}=this.slide,aa=this.slide["x"===Q?"width":"height"]*this.currZoomLevel,ac=g("x"===Q?"left":"top",ad.options,ad.viewportSize,this.slide.data,this.slide.index),ab=this.slide.panAreaSize[Q];this.center[Q]=Math.round((ab-aa)/2)+ac,this.max[Q]=aa>ab?Math.round(ab-aa)+ac:this.center[Q],this.min[Q]=aa>ab?ac:this.center[Q]}reset(){this.center.x=0,this.center.y=0,this.max.x=0,this.max.y=0,this.min.x=0,this.min.y=0}correctPan(Q,aa){return n(aa,this.max[Q],this.min[Q])}}class y{constructor(Q,aa,ab,ac){this.pswp=ac,this.options=Q,this.itemData=aa,this.index=ab}update(ab,ac,ad){this.elementSize={x:ab,y:ac},this.panAreaSize=ad;let aa=this.panAreaSize.x/this.elementSize.x,Q=this.panAreaSize.y/this.elementSize.y;this.fit=Math.min(1,aa<Q?aa:Q),this.fill=Math.min(1,aa>Q?aa:Q),this.vFill=Math.min(1,Q),this.initial=this.l(),this.secondary=this.p(),this.max=Math.max(this.initial,this.secondary,this.u()),this.min=Math.min(this.fit,this.initial,this.secondary),this.pswp&&this.pswp.dispatch("zoomLevelsUpdate",{zoomLevels:this,slideData:this.itemData})}m(aa){let Q=this.options[aa+"ZoomLevel"];if(Q)return"function"==typeof Q?Q(this):"fill"===Q?this.fill:"fit"===Q?this.fit:Number(Q)}p(){let Q=this.m("secondary");return Q||((Q=Math.min(1,3*this.fit))*this.elementSize.x>4e3&&(Q=4e3/this.elementSize.x),Q)}l(){return this.m("initial")||this.fit}u(){let Q=this.m("max");return Q||Math.max(1,4*this.fit)}}class b{constructor(ab,aa,Q){this.data=ab,this.index=aa,this.pswp=Q,this.isActive=aa===Q.currIndex,this.currentResolution=0,this.panAreaSize={},this.isFirstSlide=this.isActive&&!Q.opener.isOpen,this.zoomLevels=new y(Q.options,ab,aa,Q),this.pswp.dispatch("gettingData",{slide:this,data:this.data,index:aa}),this.pan={x:0,y:0},this.content=this.pswp.contentLoader.getContentBySlide(this),this.container=t("pswp__zoom-wrap"),this.currZoomLevel=1,this.width=this.content.width,this.height=this.content.height,this.bounds=new v(this),this.prevDisplayedWidth=-1,this.prevDisplayedHeight=-1,this.pswp.dispatch("slideInit",{slide:this})}setIsActive(Q){Q&&!this.isActive?this.activate():!Q&&this.isActive&&this.deactivate()}append(Q){this.holderElement=Q,this.data?(this.calculateSize(),this.container.style.transformOrigin="0 0",this.load(),this.appendHeavy(),this.updateContentSize(),this.holderElement.innerHTML="",this.holderElement.appendChild(this.container),this.zoomAndPanToInitial(),this.pswp.dispatch("firstZoomPan",{slide:this}),this.applyCurrentZoomPan(),this.pswp.dispatch("afterSetContent",{slide:this}),this.isActive&&this.activate()):this.holderElement.innerHTML=""}load(){this.content.load(),this.pswp.dispatch("slideLoad",{slide:this})}appendHeavy(){let{pswp:Q}=this;!this.heavyAppended&&Q.opener.isOpen&&!Q.mainScroll.isShifted()&&(this.isActive,1)&&(this.pswp.dispatch("appendHeavy",{slide:this}).defaultPrevented||(this.heavyAppended=!0,this.content.append(),this.pswp.dispatch("appendHeavyContent",{slide:this})))}activate(){this.isActive=!0,this.appendHeavy(),this.content.activate(),this.pswp.dispatch("slideActivate",{slide:this})}deactivate(){this.isActive=!1,this.content.deactivate(),this.currentResolution=0,this.zoomAndPanToInitial(),this.applyCurrentZoomPan(),this.updateContentSize(),this.pswp.dispatch("slideDeactivate",{slide:this})}destroy(){this.content.hasSlide=!1,this.content.remove(),this.pswp.dispatch("slideDestroy",{slide:this})}resize(){this.currZoomLevel!==this.zoomLevels.initial&&this.isActive?(this.calculateSize(),this.bounds.update(this.currZoomLevel),this.panTo(this.pan.x,this.pan.y)):(this.calculateSize(),this.currentResolution=0,this.zoomAndPanToInitial(),this.applyCurrentZoomPan(),this.updateContentSize())}updateContentSize(ac){let Q=this.currentResolution||this.zoomLevels.initial;if(!Q)return;let aa=Math.round(this.width*Q)||this.pswp.viewportSize.x,ab=Math.round(this.height*Q)||this.pswp.viewportSize.y;(this.sizeChanged(aa,ab)||ac)&&this.content.setDisplayedSize(aa,ab)}sizeChanged(Q,aa){return(Q!==this.prevDisplayedWidth||aa!==this.prevDisplayedHeight)&&(this.prevDisplayedWidth=Q,this.prevDisplayedHeight=aa,!0)}getPlaceholderElement(){if(this.content.placeholder)return this.content.placeholder.element}zoomTo(aa,ab,ac,af){let{pswp:Q}=this;if(!this.isZoomable()||Q.mainScroll.isShifted())return;Q.dispatch("beforeZoomTo",{destZoomLevel:aa,centerPoint:ab,transitionDuration:ac}),Q.animations.stopAllPan();let ad=this.currZoomLevel;af||(aa=n(aa,this.zoomLevels.min,this.zoomLevels.max)),this.setZoomLevel(aa),this.pan.x=this.calculateZoomToPanOffset("x",ab,ad),this.pan.y=this.calculateZoomToPanOffset("y",ab,ad),s(this.pan);let ae=()=>{this.g(aa),this.applyCurrentZoomPan()};ac?Q.animations.startTransition({isPan:!0,name:"zoomTo",target:this.container,transform:this.getCurrentTransform(),onComplete:ae,duration:ac,easing:Q.options.easing}):ae()}toggleZoom(Q){this.zoomTo(this.currZoomLevel===this.zoomLevels.initial?this.zoomLevels.secondary:this.zoomLevels.initial,Q,this.pswp.options.zoomAnimationDuration)}setZoomLevel(Q){this.currZoomLevel=Q,this.bounds.update(this.currZoomLevel)}calculateZoomToPanOffset(Q,aa,ab){if(0==this.bounds.max[Q]-this.bounds.min[Q])return this.bounds.center[Q];aa||(aa=this.pswp.getViewportCenterPoint());let ac=this.currZoomLevel/ab;return this.bounds.correctPan(Q,(this.pan[Q]-aa[Q])*ac+aa[Q])}panTo(Q,aa){this.pan.x=this.bounds.correctPan("x",Q),this.pan.y=this.bounds.correctPan("y",aa),this.applyCurrentZoomPan()}isPannable(){return this.width&&this.currZoomLevel>this.zoomLevels.fit}isZoomable(){return this.width&&this.content.isZoomable()}applyCurrentZoomPan(){this._(this.pan.x,this.pan.y,this.currZoomLevel),this===this.pswp.currSlide&&this.pswp.dispatch("zoomPanUpdate",{slide:this})}zoomAndPanToInitial(){this.currZoomLevel=this.zoomLevels.initial,this.bounds.update(this.currZoomLevel),i(this.pan,this.bounds.center),this.pswp.dispatch("initialZoomPan",{slide:this})}_(aa,ab,Q){Q/=this.currentResolution||this.zoomLevels.initial,r(this.container,aa,ab,Q)}calculateSize(){let{pswp:Q}=this;i(this.panAreaSize,_(Q.options,Q.viewportSize,this.data,this.index)),this.zoomLevels.update(this.width,this.height,this.panAreaSize),Q.dispatch("calcSlideSize",{slide:this})}getCurrentTransform(){let Q=this.currZoomLevel/(this.currentResolution||this.zoomLevels.initial);return o(this.pan.x,this.pan.y,Q)}g(Q){Q!==this.currentResolution&&(this.currentResolution=Q,this.updateContentSize(),this.pswp.dispatch("resolutionChanged"))}}class x{constructor(Q){this.gestures=Q,this.pswp=Q.pswp,this.startPan={}}start(){i(this.startPan,this.pswp.currSlide.pan),this.pswp.animations.stopAll()}change(){let{p1:ac,prevP1:ad,dragAxis:ae,pswp:aa}=this.gestures,{currSlide:Q}=aa;if("y"===ae&&aa.options.closeOnVerticalDrag&&Q.currZoomLevel<=Q.zoomLevels.fit&&!this.gestures.isMultitouch){let ab=Q.pan.y+(ac.y-ad.y);if(!aa.dispatch("verticalDrag",{panY:ab}).defaultPrevented){this.v("y",ab,.6);let af=1-Math.abs(this.S(Q.pan.y));aa.applyBgOpacity(af),Q.applyCurrentZoomPan()}}else this.M("x")||(this.M("y"),s(Q.pan),Q.applyCurrentZoomPan())}end(){let{pswp:aa,velocity:Q}=this.gestures,{mainScroll:ab}=aa,ad=0;if(aa.animations.stopAll(),ab.isShifted()){let ac=(ab.x-ab.getCurrSlideX())/aa.viewportSize.x;Q.x< -0.5&&ac<0||Q.x<.1&&ac< -0.5?(ad=1,Q.x=Math.min(Q.x,0)):(Q.x>.5&&ac>0||Q.x> -0.1&&ac>.5)&&(ad=-1,Q.x=Math.max(Q.x,0)),ab.moveIndexBy(ad,!0,Q.x)}aa.currSlide.currZoomLevel>aa.currSlide.zoomLevels.max||this.gestures.isMultitouch?this.gestures.zoomLevels.correctZoomPan(!0):(this.P("x"),this.P("y"))}P(Q){var ai,ae;let{pswp:aa}=this,{currSlide:aj}=aa,{velocity:af}=this.gestures,{pan:ak,bounds:al}=aj,ab=ak[Q],am=aa.bgOpacity<1&&"y"===Q,ad=ab+(ai=af[Q])*(ae=.995)/(1-ae);if(am){let ag=this.S(ab),ah=this.S(ad);if(ag<0&&ah< -0.4||ag>0&&ah>.4)return void aa.close()}let ac=al.correctPan(Q,ad);if(ab===ac)return;let an=ac===ad?1:.82,ao=aa.bgOpacity,ap=ac-ab;aa.animations.startSpring({name:"panGesture"+Q,isPan:!0,start:ab,end:ac,velocity:af[Q],dampingRatio:an,onUpdate(ab){if(am&&aa.bgOpacity<1){let ad=1-(ac-ab)/ap;aa.applyBgOpacity(n(ao+(1-ao)*ad,0,1))}ak[Q]=Math.floor(ab),aj.applyCurrentZoomPan()}})}M(Q){let{p1:al,pswp:ai,dragAxis:am,prevP1:an,isMultitouch:aj}=this.gestures,{currSlide:af,mainScroll:aa}=ai,ae=al[Q]-an[Q],ad=aa.x+ae;if(!ae)return;if("x"===Q&&!af.isPannable()&&!aj)return aa.moveTo(ad,!0),!0;let{bounds:ab}=af,ac=af.pan[Q]+ae;if(ai.options.allowPanToNext&&"x"===am&&"x"===Q&&!aj){let ag=aa.getCurrSlideX(),ah=aa.x-ag,ak=ae>0,ao=!ak;if(ac>ab.min[Q]&&ak){if(ab.min[Q]<=this.startPan[Q])return aa.moveTo(ad,!0),!0;this.v(Q,ac)}else if(ac<ab.max[Q]&&ao){if(this.startPan[Q]<=ab.max[Q])return aa.moveTo(ad,!0),!0;this.v(Q,ac)}else if(0!==ah){if(ah>0)return aa.moveTo(Math.max(ad,ag),!0),!0;if(ah<0)return aa.moveTo(Math.min(ad,ag),!0),!0}else this.v(Q,ac)}else"y"===Q&&(aa.isShifted()||ab.min.y===ab.max.y)||this.v(Q,ac)}S(Q){return(Q-this.pswp.currSlide.bounds.center.y)/(this.pswp.viewportSize.y/3)}v(Q,aa,ac){let{pan:ab,bounds:ad}=this.pswp.currSlide;if(ad.correctPan(Q,aa)!==aa||ac){let ae=Math.round(aa-ab[Q]);ab[Q]+=ae*(ac||.35)}else ab[Q]=aa}}function S(Q,aa,ab){return Q.x=(aa.x+ab.x)/2,Q.y=(aa.y+ab.y)/2,Q}class M{constructor(Q){this.gestures=Q,this.pswp=this.gestures.pswp,this.C={},this.T={},this.D={}}start(){this.I=this.pswp.currSlide.currZoomLevel,i(this.C,this.pswp.currSlide.pan),this.pswp.animations.stopAllPan(),this.A=!1}change(){let{p1:ae,startP1:af,p2:ag,startP2:ah,pswp:ab}=this.gestures,{currSlide:aa}=ab,ac=aa.zoomLevels.min,ad=aa.zoomLevels.max;if(!aa.isZoomable()||ab.mainScroll.isShifted())return;S(this.T,af,ah),S(this.D,ae,ag);let Q=1/h(af,ah)*h(ae,ag)*this.I;if(Q>aa.zoomLevels.initial+aa.zoomLevels.initial/15&&(this.A=!0),Q<ac){if(ab.options.pinchToClose&&!this.A&&this.I<=aa.zoomLevels.initial){let ai=1-(ac-Q)/(ac/1.2);ab.dispatch("pinchClose",{bgOpacity:ai}).defaultPrevented||ab.applyBgOpacity(ai)}else Q=ac-.15*(ac-Q)}else Q>ad&&(Q=ad+.05*(Q-ad));aa.pan.x=this.L("x",Q),aa.pan.y=this.L("y",Q),aa.setZoomLevel(Q),aa.applyCurrentZoomPan()}end(){let{pswp:Q}=this,{currSlide:aa}=Q;aa.currZoomLevel<aa.zoomLevels.initial&&!this.A&&Q.options.pinchToClose?Q.close():this.correctZoomPan()}L(Q,aa){let ab=aa/this.I;return this.D[Q]-(this.T[Q]-this.C[Q])*ab}correctZoomPan(ag){let{pswp:ab}=this,{currSlide:Q}=ab;if(!Q.isZoomable())return;void 0===this.D.x&&(ag=!0);let ac=Q.currZoomLevel,aa,ae=!0;ac<Q.zoomLevels.initial?aa=Q.zoomLevels.initial:ac>Q.zoomLevels.max?aa=Q.zoomLevels.max:(ae=!1,aa=ac);let aj=ab.bgOpacity,ai=ab.bgOpacity<1,af=i({},Q.pan),ad=i({},af);ag&&(this.D.x=0,this.D.y=0,this.T.x=0,this.T.y=0,this.I=ac,i(this.C,af)),ae&&(ad={x:this.L("x",aa),y:this.L("y",aa)}),Q.setZoomLevel(aa),ad={x:Q.bounds.correctPan("x",ad.x),y:Q.bounds.correctPan("y",ad.y)},Q.setZoomLevel(ac);let ah=!0;if(e(ad,af)&&(ah=!1),!ah&&!ae&&!ai)return Q.g(aa),void Q.applyCurrentZoomPan();ab.animations.stopAllPan(),ab.animations.startSpring({isPan:!0,start:0,end:1e3,velocity:0,dampingRatio:1,naturalFrequency:40,onUpdate(ag){if(ag/=1e3,ah||ae){if(ah&&(Q.pan.x=af.x+(ad.x-af.x)*ag,Q.pan.y=af.y+(ad.y-af.y)*ag),ae){let ak=ac+(aa-ac)*ag;Q.setZoomLevel(ak)}Q.applyCurrentZoomPan()}ai&&ab.bgOpacity<1&&ab.applyBgOpacity(n(aj+(1-aj)*ag,0,1))},onComplete(){Q.g(aa),Q.applyCurrentZoomPan()}})}}function z(Q){return!!Q.target.closest(".pswp__container")}class P{constructor(Q){this.gestures=Q}click(ab,Q){let aa=Q.target.classList,ac=aa.contains("pswp__img"),ad=aa.contains("pswp__item")||aa.contains("pswp__zoom-wrap");ac?this.k("imageClick",ab,Q):ad&&this.k("bgClick",ab,Q)}tap(aa,Q){z(Q)&&this.k("tap",aa,Q)}doubleTap(aa,Q){z(Q)&&this.k("doubleTap",aa,Q)}k(af,ab,ad){let{pswp:Q}=this.gestures,{currSlide:aa}=Q,ae=af+"Action",ac=Q.options[ae];if(!Q.dispatch(ae,{point:ab,originalEvent:ad}).defaultPrevented){if("function"!=typeof ac)switch(ac){case"close":case"next":Q[ac]();break;case"zoom":aa.toggleZoom(ab);break;case"zoom-or-close":aa.isZoomable()&&aa.zoomLevels.secondary!==aa.zoomLevels.initial?aa.toggleZoom(ab):Q.options.clickToCloseNonZoomable&&Q.close();break;case"toggle-controls":this.gestures.pswp.element.classList.toggle("pswp--ui-visible")}else ac.call(Q,ab,ad)}}}class C{constructor(Q){this.pswp=Q,this.dragAxis=void 0,this.p1={},this.p2={},this.prevP1={},this.prevP2={},this.startP1={},this.startP2={},this.velocity={},this.Z={},this.F={},this.O=0,this.B=[],this.R="ontouchstart"in window,this.N=!!window.PointerEvent,this.supportsTouch=this.R||this.N&&navigator.maxTouchPoints>1,this.supportsTouch||(Q.options.allowPanToNext=!1),this.drag=new x(this),this.zoomLevels=new M(this),this.tapHandler=new P(this),Q.on("bindEvents",()=>{Q.events.add(Q.scrollWrap,"click",Q=>this.G(Q)),this.N?this.V("pointer","down","up","cancel"):this.R?(this.V("touch","start","end","cancel"),Q.scrollWrap.ontouchmove=()=>{},Q.scrollWrap.ontouchend=()=>{}):this.V("mouse","down","up")})}V(Q,ae,af,ac){let{pswp:ab}=this,{events:aa}=ab,ad=ac?Q+ac:"";aa.add(ab.scrollWrap,Q+ae,this.onPointerDown.bind(this)),aa.add(window,Q+"move",this.onPointerMove.bind(this)),aa.add(window,Q+af,this.onPointerUp.bind(this)),ad&&aa.add(ab.scrollWrap,ad,this.onPointerUp.bind(this))}onPointerDown(Q){let ab;if("mousedown"!==Q.type&&"mouse"!==Q.pointerType||(ab=!0),ab&&Q.button>0)return;let{pswp:aa}=this;aa.opener.isOpen?aa.dispatch("pointerDown",{originalEvent:Q}).defaultPrevented||(ab&&(aa.mouseDetected(),this.U(Q)),aa.animations.stopAll(),this.q(Q,"down"),this.pointerDown=!0,1===this.O&&(this.dragAxis=null,i(this.startP1,this.p1)),this.O>1?(this.H(),this.isMultitouch=!0):this.isMultitouch=!1):Q.preventDefault()}onPointerMove(Q){Q.preventDefault(),this.O&&(this.q(Q,"move"),this.pswp.dispatch("pointerMove",{originalEvent:Q}).defaultPrevented||(1!==this.O||this.isDragging?this.O>1&&!this.isZooming&&(this.K(),this.isZooming=!0,this.W(),this.zoomLevels.start(),this.j(),this.X()):(this.dragAxis||this.Y(),this.dragAxis&&!this.isDragging&&(this.isZooming&&(this.isZooming=!1,this.zoomLevels.end()),this.isDragging=!0,this.H(),this.W(),this.$=Date.now(),this.J=!1,i(this.F,this.p1),this.velocity.x=0,this.velocity.y=0,this.drag.start(),this.j(),this.X()))))}K(){this.isDragging&&(this.isDragging=!1,this.J||this.tt(!0),this.drag.end(),this.dragAxis=null)}onPointerUp(Q){this.O&&(this.q(Q,"up"),this.pswp.dispatch("pointerUp",{originalEvent:Q}).defaultPrevented||(0===this.O&&(this.pointerDown=!1,this.j(),this.isDragging?this.K():this.isZooming||this.isMultitouch||this.it(Q)),this.O<2&&this.isZooming&&(this.isZooming=!1,this.zoomLevels.end(),1===this.O&&(this.dragAxis=null,this.W()))))}X(){(this.isDragging||this.isZooming)&&(this.tt(),this.isDragging?e(this.p1,this.prevP1)||this.drag.change():e(this.p1,this.prevP1)&&e(this.p2,this.prevP2)||this.zoomLevels.change(),this.st(),this.raf=requestAnimationFrame(this.X.bind(this)))}tt(ab){let aa=Date.now(),Q=aa-this.$;Q<50&&!ab||(this.velocity.x=this.ht("x",Q),this.velocity.y=this.ht("y",Q),this.$=aa,i(this.F,this.p1),this.J=!0)}it(Q){let{mainScroll:aa}=this.pswp;if(aa.isShifted())return void aa.moveIndexBy(0,!0);if(Q.type.indexOf("cancel")>0)return;if("mouseup"===Q.type||"mouse"===Q.pointerType)return void this.tapHandler.click(this.startP1,Q);let ab=this.pswp.options.doubleTapAction?300:0;this.et?(this.H(),25>h(this.Z,this.startP1)&&this.tapHandler.doubleTap(this.startP1,Q)):(i(this.Z,this.startP1),this.et=setTimeout(()=>{this.tapHandler.tap(this.startP1,Q),this.H()},ab))}H(){this.et&&(clearTimeout(this.et),this.et=null)}ht(Q,aa){let ab=this.p1[Q]-this.F[Q];return Math.abs(ab)>1&&aa>5?ab/aa:0}j(){this.raf&&(cancelAnimationFrame(this.raf),this.raf=null)}U(Q){return Q.preventDefault(),!0}q(ab,ac){if(this.N){let ad=ab,aa=this.B.findIndex(Q=>Q.id===ad.pointerId);"up"===ac&&aa> -1?this.B.splice(aa,1):"down"===ac&& -1===aa?this.B.push(this.nt(ad,{})):aa> -1&&this.nt(ad,this.B[aa]),this.O=this.B.length,this.O>0&&i(this.p1,this.B[0]),this.O>1&&i(this.p2,this.B[1])}else{let Q=ab;this.O=0,Q.type.indexOf("touch")> -1?Q.touches&&Q.touches.length>0&&(this.nt(Q.touches[0],this.p1),this.O++,Q.touches.length>1&&(this.nt(Q.touches[1],this.p2),this.O++)):(this.nt(ab,this.p1),"up"===ac?this.O=0:this.O++)}}st(){i(this.prevP1,this.p1),i(this.prevP2,this.p2)}W(){i(this.startP1,this.p1),i(this.startP2,this.p2),this.st()}Y(){if(this.pswp.mainScroll.isShifted())this.dragAxis="x";else{let aa=Math.abs(this.p1.x-this.startP1.x)-Math.abs(this.p1.y-this.startP1.y);if(0!==aa){let Q=aa>0?"x":"y";Math.abs(this.p1[Q]-this.startP1[Q])>=10&&(this.dragAxis=Q)}}}nt(Q,aa){return aa.x=Q.pageX-this.pswp.offset.x,aa.y=Q.pageY-this.pswp.offset.y,"pointerId"in Q?aa.id=Q.pointerId:void 0!==Q.identifier&&(aa.id=Q.identifier),aa}G(Q){this.pswp.mainScroll.isShifted()&&(Q.preventDefault(),Q.stopPropagation())}}class T{constructor(Q){this.pswp=Q,this.x=0,this.slideWidth=void 0,this.itemHolders=void 0,this.resetPosition()}resize(ac){let{pswp:Q}=this,aa=Math.round(Q.viewportSize.x+Q.viewportSize.x*Q.options.spacing),ab=aa!==this.slideWidth;ab&&(this.slideWidth=aa,this.moveTo(this.getCurrSlideX())),this.itemHolders.forEach((Q,aa)=>{ab&&r(Q.el,(aa+this.ot)*this.slideWidth),ac&&Q.slide&&Q.slide.resize()})}resetPosition(){this.rt=0,this.ct=0,this.slideWidth=0,this.ot=-1}appendHolders(){this.itemHolders=[];for(let Q=0;Q<3;Q++){let aa=t("pswp__item",!1,this.pswp.container);aa.style.display=1===Q?"block":"none",this.itemHolders.push({el:aa})}}canBeSwiped(){return this.pswp.getNumItems()>1}moveIndexBy(ac,ah,ai){let{pswp:Q}=this,ab=Q.potentialIndex+ac,aa=Q.getNumItems();if(Q.canLoop()){ab=Q.getLoopedIndex(ab);let ad=(ac+aa)%aa;ac=ad<=aa/2?ad:ad-aa}else ab<0?ab=0:ab>=aa&&(ab=aa-1),ac=ab-Q.potentialIndex;Q.potentialIndex=ab,this.rt-=ac,Q.animations.stopMainScroll();let ag=this.getCurrSlideX();if(ah){Q.animations.startSpring({isMainScroll:!0,start:this.x,end:ag,velocity:ai||0,naturalFrequency:30,dampingRatio:1,onUpdate:Q=>{this.moveTo(Q)},onComplete:()=>{this.updateCurrItem(),Q.appendHeavy()}});let ae=Q.potentialIndex-Q.currIndex;if(Q.canLoop()){let af=(ae+aa)%aa;ae=af<=aa/2?af:af-aa}Math.abs(ae)>1&&this.updateCurrItem()}else this.moveTo(ag),this.updateCurrItem();if(ac)return!0}getCurrSlideX(){return this.slideWidth*this.rt}isShifted(){return this.x!==this.getCurrSlideX()}updateCurrItem(){let{pswp:Q}=this,ab=this.ct-this.rt;if(!ab)return;this.ct=this.rt,Q.currIndex=Q.potentialIndex;let aa,ac=Math.abs(ab);ac>=3&&(this.ot+=ab+(ab>0?-3:3),ac=3);for(let ad=0;ad<ac;ad++)ab>0?(aa=this.itemHolders.shift(),this.itemHolders[2]=aa,this.ot++,r(aa.el,(this.ot+2)*this.slideWidth),Q.setContent(aa,Q.currIndex-ac+ad+2)):(aa=this.itemHolders.pop(),this.itemHolders.unshift(aa),this.ot--,r(aa.el,this.ot*this.slideWidth),Q.setContent(aa,Q.currIndex+ac-ad-2));Math.abs(this.ot)>50&&!this.isShifted()&&(this.resetPosition(),this.resize()),Q.animations.stopAllPan(),this.itemHolders.forEach((Q,aa)=>{Q.slide&&Q.slide.setIsActive(1===aa)}),Q.currSlide=this.itemHolders[1].slide,Q.contentLoader.updateLazy(ab),Q.currSlide.applyCurrentZoomPan(),Q.dispatch("change")}moveTo(Q,ac){let aa,ab;!this.pswp.canLoop()&&ac&&(aa=(this.slideWidth*this.rt-Q)/this.slideWidth,aa+=this.pswp.currIndex,ab=Math.round(Q-this.x),(aa<0&&ab>0||aa>=this.pswp.getNumItems()-1&&ab<0)&&(Q=this.x+.35*ab)),this.x=Q,r(this.pswp.container,Q),this.pswp.dispatch("moveMainScroll",{x:Q,dragging:ac})}}class D{constructor(Q){this.pswp=Q,Q.on("bindEvents",()=>{Q.options.initialPointerPos||this.lt(),Q.events.add(document,"focusin",this.ut.bind(this)),Q.events.add(document,"keydown",this.dt.bind(this))});let aa=document.activeElement;Q.on("destroy",()=>{Q.options.returnFocus&&aa&&this.ft&&aa.focus()})}lt(){this.ft||(this.pswp.element.focus(),this.ft=!0)}dt(ac){let{pswp:ab}=this;if(ab.dispatch("keydown",{originalEvent:ac}).defaultPrevented||function(Q){if(2===Q.which||Q.ctrlKey||Q.metaKey||Q.altKey||Q.shiftKey)return!0}(ac))return;let ad,Q,ae;switch(ac.keyCode){case 27:ab.options.escKey&&(ad="close");break;case 90:ad="toggleZoom";break;case 37:Q="x";break;case 38:Q="y";break;case 39:Q="x",ae=!0;break;case 40:ae=!0,Q="y";break;case 9:this.lt()}if(Q){ac.preventDefault();let{currSlide:aa}=ab;ab.options.arrowKeys&&"x"===Q&&ab.getNumItems()>1?ad=ae?"next":"prev":aa&&aa.currZoomLevel>aa.zoomLevels.fit&&(aa.pan[Q]+=ae?-80:80,aa.panTo(aa.pan.x,aa.pan.y))}ad&&(ac.preventDefault(),ab[ad]())}ut(Q){let{template:aa}=this.pswp;document===Q.target||aa===Q.target||aa.contains(Q.target)||aa.focus()}}class I{constructor(Q){this.props=Q;let{target:ac,onComplete:ad,transform:ae,onFinish:af}=Q,{duration:aa,easing:ab}=Q;this.onFinish=af;let ag=ae?"transform":"opacity",ah=Q[ag];this.wt=ac,this.gt=ad,aa=aa||333,ab=ab||"cubic-bezier(.4,0,.22,1)",this._t=this._t.bind(this),this.vt=setTimeout(()=>{a(ac,ag,aa,ab),this.vt=setTimeout(()=>{ac.addEventListener("transitionend",this._t,!1),ac.addEventListener("transitioncancel",this._t,!1),ac.style[ag]=ah},30)},0)}_t(Q){Q.target===this.wt&&this.yt()}yt(){this.bt||(this.bt=!0,this.onFinish(),this.gt&&this.gt())}destroy(){this.vt&&clearTimeout(this.vt),a(this.wt),this.wt.removeEventListener("transitionend",this._t,!1),this.wt.removeEventListener("transitioncancel",this._t,!1),this.bt||this.yt()}}class A{constructor(Q,aa,ab){this.velocity=1e3*Q,this.xt=aa||.75,this.St=ab||12,this.xt<1&&(this.Mt=this.St*Math.sqrt(1-this.xt*this.xt))}easeFrame(aa,ab){let Q,ac=0;ab/=1e3;let ad=Math.E**(-this.xt*this.St*ab);if(1===this.xt)Q=this.velocity+this.St*aa,ac=(aa+Q*ab)*ad,this.velocity=-(ac*this.St)+Q*ad;else if(this.xt<1){Q=1/this.Mt*(this.xt*this.St*aa+this.velocity);let ae=Math.cos(this.Mt*ab),af=Math.sin(this.Mt*ab);ac=ad*(aa*ae+Q*af),this.velocity=-(ac*this.St)*this.xt+ad*(-this.Mt*aa*af+this.Mt*Q*ae)}return ac}}class E{constructor(Q){this.props=Q;let{start:aa,end:ab,velocity:ac,onUpdate:ah,onComplete:ai,onFinish:ad,dampingRatio:ae,naturalFrequency:af}=Q;this.onFinish=ad;let aj=new A(ac,ae,af),ak=Date.now(),al=aa-ab,ag=()=>{this.zt&&(1>Math.abs(al=aj.easeFrame(al,Date.now()-ak))&&50>Math.abs(aj.velocity)?(ah(ab),ai&&ai(),this.onFinish()):(ak=Date.now(),ah(al+ab),this.zt=requestAnimationFrame(ag)))};this.zt=requestAnimationFrame(ag)}destroy(){this.zt>=0&&cancelAnimationFrame(this.zt),this.zt=null}}class L{constructor(){this.activeAnimations=[]}startSpring(Q){this.Pt(Q,!0)}startTransition(Q){this.Pt(Q)}Pt(aa,ab){let Q;return Q=ab?new E(aa):new I(aa),this.activeAnimations.push(Q),Q.onFinish=()=>this.stop(Q),Q}stop(Q){Q.destroy();let aa=this.activeAnimations.indexOf(Q);aa> -1&&this.activeAnimations.splice(aa,1)}stopAll(){this.activeAnimations.forEach(Q=>{Q.destroy()}),this.activeAnimations=[]}stopAllPan(){this.activeAnimations=this.activeAnimations.filter(Q=>!Q.props.isPan||(Q.destroy(),!1))}stopMainScroll(){this.activeAnimations=this.activeAnimations.filter(Q=>!Q.props.isMainScroll||(Q.destroy(),!1))}isPanRunning(){return this.activeAnimations.some(Q=>Q.props.isPan)}}class k{constructor(Q){this.pswp=Q,Q.events.add(Q.element,"wheel",this.Ct.bind(this))}Ct(Q){Q.preventDefault();let{currSlide:aa}=this.pswp,{deltaX:ad,deltaY:ac}=Q;if(aa&&!this.pswp.dispatch("wheel",{originalEvent:Q}).defaultPrevented){if(Q.ctrlKey||this.pswp.options.wheelToZoom){if(aa.isZoomable()){let ab=-ac;1===Q.deltaMode?ab*=.05:ab*=Q.deltaMode?1:.002,ab=2**ab;let ae=aa.currZoomLevel*ab;aa.zoomTo(ae,{x:Q.clientX,y:Q.clientY})}}else aa.isPannable()&&(1===Q.deltaMode&&(ad*=18,ac*=18),aa.panTo(aa.pan.x-ad,aa.pan.y-ac))}}}class Z{constructor(aa,Q){let ac=Q.name||Q.className,ah=Q.html;if(!1===aa.options[ac])return;"string"==typeof aa.options[ac+"SVG"]&&(ah=aa.options[ac+"SVG"]),aa.dispatch("uiElementCreate",{data:Q});let ab,ad="";Q.isButton?(ad+="pswp__button ",ad+=Q.className||`pswp__button--${Q.name}`):ad+=Q.className||`pswp__${Q.name}`;let af=Q.isButton?Q.tagName||"button":Q.tagName||"div";if(ab=t(ad,af=af.toLowerCase()),Q.isButton){ab=t(ad,af),"button"===af&&(ab.type="button");let{title:ae}=Q,{ariaLabel:ai}=Q;"string"==typeof aa.options[ac+"Title"]&&(ae=aa.options[ac+"Title"]),ae&&(ab.title=ae),(ai||ae)&&ab.setAttribute("aria-label",ai||ae)}ab.innerHTML=function(aa){if("string"==typeof aa)return aa;if(!aa||!aa.isCustomSVG)return"";let ab=aa,Q='<svg aria-hidden="true" class="pswp__icn" viewBox="0 0 %d %d" width="%d" height="%d">';return Q=Q.split("%d").join(ab.size||32),ab.outlineID&&(Q+='<use class="pswp__icn-shadow" xlink:href="#'+ab.outlineID+'"/>'),Q+=ab.inner,Q+="</svg>",Q}(ah),Q.onInit&&Q.onInit(ab,aa),Q.onClick&&(ab.onclick=ac=>{"string"==typeof Q.onClick?aa[Q.onClick]():Q.onClick(ac,ab,aa)});let aj=Q.appendTo||"bar",ag;"bar"===aj?(aa.topBar||(aa.topBar=t("pswp__top-bar pswp__hide-on-close","div",aa.scrollWrap)),ag=aa.topBar):(ab.classList.add("pswp__hide-on-close"),ag="wrapper"===aj?aa.scrollWrap:aa.element),ag.appendChild(aa.applyFilters("uiElement",ab,Q))}}function F(Q,aa,ab){Q.classList.add("pswp__button--arrow"),aa.on("change",()=>{aa.options.loop||(Q.disabled=ab?!(aa.currIndex<aa.getNumItems()-1):!(aa.currIndex>0))})}let O={name:"arrowPrev",className:"pswp__button--arrow--prev",title:"Previous",order:10,isButton:!0,appendTo:"wrapper",html:{isCustomSVG:!0,size:60,inner:'<path d="M29 43l-3 3-16-16 16-16 3 3-13 13 13 13z" id="pswp__icn-arrow"/>',outlineID:"pswp__icn-arrow"},onClick:"prev",onInit:F},B={name:"arrowNext",className:"pswp__button--arrow--next",title:"Next",order:11,isButton:!0,appendTo:"wrapper",html:{isCustomSVG:!0,size:60,inner:'<use xlink:href="#pswp__icn-arrow"/>',outlineID:"pswp__icn-arrow"},onClick:"next",onInit(Q,aa){F(Q,aa,!0)}},R={name:"close",title:"Close",order:20,isButton:!0,html:{isCustomSVG:!0,inner:'<path d="M24 10l-2-2-6 6-6-6-2 2 6 6-6 6 2 2 6-6 6 6 2-2-6-6z" id="pswp__icn-close"/>',outlineID:"pswp__icn-close"},onClick:"close"},N={name:"zoom",title:"Zoom",order:10,isButton:!0,html:{isCustomSVG:!0,inner:'<path d="M17.426 19.926a6 6 0 1 1 1.5-1.5L23 22.5 21.5 24l-4.074-4.074z" id="pswp__icn-zoom"/><path fill="currentColor" class="pswp__zoom-icn-bar-h" d="M11 16v-2h6v2z"/><path fill="currentColor" class="pswp__zoom-icn-bar-v" d="M13 12h2v6h-2z"/>',outlineID:"pswp__icn-zoom"},onClick:"toggleZoom"},G={name:"preloader",appendTo:"bar",order:7,html:{isCustomSVG:!0,inner:'<path fill-rule="evenodd" clip-rule="evenodd" d="M21.2 16a5.2 5.2 0 1 1-5.2-5.2V8a8 8 0 1 0 8 8h-2.8Z" id="pswp__icn-loading"/>',outlineID:"pswp__icn-loading"},onInit(ab,Q){let ac,ad,ae=Q=>{var aa,ad;ac!==Q&&(ac=Q,aa="active",ad=Q,ab.classList[ad?"add":"remove"]("pswp__preloader--"+aa))},aa=()=>{if(!Q.currSlide.content.isLoading())return ae(!1),void(ad&&(clearTimeout(ad),ad=null));ad||(ad=setTimeout(()=>{ae(Q.currSlide.content.isLoading()),ad=null},Q.options.preloaderDelay))};Q.on("change",aa),Q.on("loadComplete",ab=>{Q.currSlide===ab.slide&&aa()}),Q.ui.updatePreloaderVisibility=aa}},V={name:"counter",order:5,onInit(aa,Q){Q.on("change",()=>{aa.innerText=Q.currIndex+1+Q.options.indexIndicatorSep+Q.getNumItems()})}};function U(Q,aa){Q.classList[aa?"add":"remove"]("pswp--zoomed-in")}class q{constructor(Q){this.pswp=Q,this.updatePreloaderVisibility=void 0,this.Tt=void 0}init(){let{pswp:Q}=this;this.isRegistered=!1,this.uiElementsData=[R,O,B,N,G,V],Q.dispatch("uiRegister"),this.uiElementsData.sort((Q,aa)=>(Q.order||0)-(aa.order||0)),this.items=[],this.isRegistered=!0,this.uiElementsData.forEach(Q=>{this.registerElement(Q)}),Q.on("change",()=>{Q.element.classList[1===Q.getNumItems()?"add":"remove"]("pswp--one-slide")}),Q.on("zoomPanUpdate",()=>this.Dt())}registerElement(Q){this.isRegistered?this.items.push(new Z(this.pswp,Q)):this.uiElementsData.push(Q)}Dt(){let{template:Q,currSlide:aa,options:ac}=this.pswp,{currZoomLevel:ab}=aa;if(this.pswp.opener.isClosing||(this.pswp.opener.isOpen||(ab=aa.zoomLevels.initial),ab===this.Tt))return;this.Tt=ab;let ad=aa.zoomLevels.initial-aa.zoomLevels.secondary;if(.01>Math.abs(ad)||!aa.isZoomable())return U(Q,!1),void Q.classList.remove("pswp--zoom-allowed");Q.classList.add("pswp--zoom-allowed");let ae=ad<0;ab===aa.zoomLevels.secondary?U(Q,ae):ab>aa.zoomLevels.secondary?U(Q,!0):U(Q,!1),"zoom"!==ac.imageClickAction&&"zoom-or-close"!==ac.imageClickAction||Q.classList.add("pswp--click-to-zoom")}}class H{constructor(aa,Q){this.type=aa,Q&&Object.assign(this,Q)}preventDefault(){this.defaultPrevented=!0}}class K{constructor(Q,aa){this.element=t("pswp__img pswp__img--placeholder",Q?"img":"",aa),Q&&(this.element.decoding="async",this.element.alt="",this.element.src=Q,this.element.setAttribute("role","presentation")),this.element.setAttribute("aria-hiden","true")}setDisplayedSize(Q,aa){this.element&&("IMG"===this.element.tagName?(c(this.element,250,"auto"),this.element.style.transformOrigin="0 0",this.element.style.transform=o(0,0,Q/250)):c(this.element,Q,aa))}destroy(){this.element.parentNode&&this.element.remove(),this.element=null}}class W{constructor(Q,aa,ab){this.instance=aa,this.data=Q,this.index=ab,this.element=void 0,this.width=Number(this.data.w)||Number(this.data.width)||0,this.height=Number(this.data.h)||Number(this.data.height)||0,this.isAttached=!1,this.hasSlide=!1,this.state="idle",this.data.type?this.type=this.data.type:this.data.src?this.type="image":this.type="html",this.instance.dispatch("contentInit",{content:this})}removePlaceholder(){this.placeholder&&!this.keepPlaceholder()&&setTimeout(()=>{this.placeholder&&(this.placeholder.destroy(),this.placeholder=null)},500)}load(Q,aa){if(!this.placeholder&&this.slide&&this.usePlaceholder()){let ab=this.instance.applyFilters("placeholderSrc",!(!this.data.msrc||!this.slide.isFirstSlide)&&this.data.msrc,this);this.placeholder=new K(ab,this.slide.container)}this.element&&!aa||this.instance.dispatch("contentLoad",{content:this,isLazy:Q}).defaultPrevented||(this.isImageContent()?this.loadImage(Q):(this.element=t("pswp__content"),this.element.innerHTML=this.data.html||""),aa&&this.slide&&this.slide.updateContentSize(!0))}loadImage(aa){let Q=t("pswp__img","img");this.element=Q,this.instance.dispatch("contentLoadImage",{content:this,isLazy:aa}).defaultPrevented||(this.data.srcset&&(Q.srcset=this.data.srcset),Q.src=this.data.src,Q.alt=this.data.alt||"",this.state=p,Q.complete?this.onLoaded():(Q.onload=()=>{this.onLoaded()},Q.onerror=()=>{this.onError()}))}setSlide(Q){this.slide=Q,this.hasSlide=!0,this.instance=Q.pswp}onLoaded(){this.state=u,this.slide&&(this.instance.dispatch("loadComplete",{slide:this.slide,content:this}),this.slide.isActive&&this.slide.heavyAppended&&!this.element.parentNode&&(this.slide.container.innerHTML="",this.append(),this.slide.updateContentSize(!0)))}onError(){this.state=d,this.slide&&(this.displayError(),this.instance.dispatch("loadComplete",{slide:this.slide,isError:!0,content:this}),this.instance.dispatch("loadError",{slide:this.slide,content:this}))}isLoading(){return this.instance.applyFilters("isContentLoading",this.state===p,this)}isError(){return this.state===d}isImageContent(){return"image"===this.type}setDisplayedSize(Q,ab){if(this.element&&(this.placeholder&&this.placeholder.setDisplayedSize(Q,ab),!this.instance.dispatch("contentResize",{content:this,width:Q,height:ab}).defaultPrevented&&(c(this.element,Q,ab),this.isImageContent()&&!this.isError()))){let aa=this.element;aa.srcset&&(!aa.dataset.largestUsedSize||Q>parseInt(aa.dataset.largestUsedSize,10))&&(aa.sizes=Q+"px",aa.dataset.largestUsedSize=String(Q)),this.slide&&this.instance.dispatch("imageSizeChange",{slide:this.slide,width:Q,height:ab,content:this})}}isZoomable(){return this.instance.applyFilters("isContentZoomable",this.isImageContent()&&this.state!==d,this)}usePlaceholder(){return this.instance.applyFilters("useContentPlaceholder",this.isImageContent(),this)}lazyLoad(){this.instance.dispatch("contentLazyLoad",{content:this}).defaultPrevented||this.load(!0)}keepPlaceholder(){return this.instance.applyFilters("isKeepingPlaceholder",this.isLoading(),this)}destroy(){this.hasSlide=!1,this.slide=null,this.instance.dispatch("contentDestroy",{content:this}).defaultPrevented||(this.remove(),this.isImageContent()&&this.element&&(this.element.onload=null,this.element.onerror=null,this.element=null))}displayError(){if(this.slide){let Q=t("pswp__error-msg");Q.innerText=this.instance.options.errorMsg,Q=this.instance.applyFilters("contentErrorElement",Q,this),this.element=t("pswp__content pswp__error-msg-container"),this.element.appendChild(Q),this.slide.container.innerHTML="",this.slide.container.appendChild(this.element),this.slide.updateContentSize(!0),this.removePlaceholder()}}append(){this.isAttached=!0,this.state!==d?this.instance.dispatch("contentAppend",{content:this}).defaultPrevented||(this.isImageContent()?this.slide&&!this.slide.isActive&&"decode"in this.element?(this.isDecoding=!0,requestAnimationFrame(()=>{this.element&&"IMG"===this.element.tagName&&this.element.decode().then(()=>{this.isDecoding=!1,requestAnimationFrame(()=>{this.appendImage()})}).catch(()=>{this.isDecoding=!1})})):(this.placeholder&&(this.state===u||this.state===d)&&this.removePlaceholder(),this.appendImage()):this.element&&!this.element.parentNode&&this.slide.container.appendChild(this.element)):this.displayError()}activate(){this.instance.dispatch("contentActivate",{content:this}).defaultPrevented||this.slide&&(this.isImageContent()&&this.isDecoding?this.appendImage():this.isError()&&this.load(!1,!0))}deactivate(){this.instance.dispatch("contentDeactivate",{content:this})}remove(){this.isAttached=!1,this.instance.dispatch("contentRemove",{content:this}).defaultPrevented||this.element&&this.element.parentNode&&this.element.remove()}appendImage(){this.isAttached&&(this.instance.dispatch("contentAppendImage",{content:this}).defaultPrevented||this.slide&&this.element&&!this.element.parentNode&&(this.slide.container.appendChild(this.element),this.placeholder&&(this.state===u||this.state===d)&&this.removePlaceholder()))}}class j{constructor(Q){this.pswp=Q,this.isClosed=!0,this.It=this.It.bind(this),this.At=void 0,Q.on("firstZoomPan",this.It)}open(){this.It(),this.Pt()}close(){if(this.isClosed||this.isClosing||this.isOpening)return!1;let Q=this.pswp.currSlide;return this.isOpen=!1,this.isOpening=!1,this.isClosing=!0,this.Et=this.pswp.options.hideAnimationDuration,Q&&Q.currZoomLevel*Q.width>=this.pswp.options.maxWidthToAnimate&&(this.Et=0),this.Lt(),setTimeout(()=>{this.Pt()},this.kt?30:0),!0}It(){if(this.pswp.off("firstZoomPan",this.It),!this.isOpening){let Q=this.pswp.currSlide;this.isOpening=!0,this.isClosing=!1,this.Et=this.pswp.options.showAnimationDuration,Q&&Q.zoomLevels.initial*Q.width>=this.pswp.options.maxWidthToAnimate&&(this.Et=0),this.Lt()}}Lt(){let{pswp:Q}=this,aa=this.pswp.currSlide,{options:ab}=Q;if("fade"===ab.showHideAnimationType?(ab.showHideOpacity=!0,this.At=!1):"none"===ab.showHideAnimationType?(ab.showHideOpacity=!1,this.Et=0,this.At=!1):this.isOpening&&Q.Zt?this.At=Q.Zt:this.At=this.pswp.getThumbBounds(),this.Ft=aa.getPlaceholderElement(),Q.animations.stopAll(),this.Ot=this.Et>50,this.Bt=Boolean(this.At)&&aa.content&&aa.content.usePlaceholder()&&(!this.isClosing||!Q.mainScroll.isShifted()),this.Bt?this.Rt=ab.showHideOpacity:(this.Rt=!0,this.isOpening&&(aa.zoomAndPanToInitial(),aa.applyCurrentZoomPan())),this.Nt=!this.Rt&&this.pswp.options.bgOpacity>.003,this.Gt=this.Rt?Q.element:Q.bg,!this.Ot)return this.Et=0,this.Bt=!1,this.Nt=!1,this.Rt=!0,void(this.isOpening&&(Q.element.style.opacity=String(.003),Q.applyBgOpacity(1)));this.Bt&&this.At&&this.At.innerRect?(this.kt=!0,this.Vt=this.pswp.container,this.Ut=this.pswp.currSlide.holderElement,Q.container.style.overflow="hidden",Q.container.style.width=Q.viewportSize.x+"px"):this.kt=!1,this.isOpening?(this.Rt?(Q.element.style.opacity=String(.003),Q.applyBgOpacity(1)):(this.Nt&&(Q.bg.style.opacity=String(.003)),Q.element.style.opacity="1"),this.Bt&&(this.qt(),this.Ft&&(this.Ft.style.willChange="transform",this.Ft.style.opacity=String(.003)))):this.isClosing&&(Q.mainScroll.itemHolders[0].el.style.display="none",Q.mainScroll.itemHolders[2].el.style.display="none",this.kt&&0!==Q.mainScroll.x&&(Q.mainScroll.resetPosition(),Q.mainScroll.resize()))}Pt(){this.isOpening&&this.Ot&&this.Ft&&"IMG"===this.Ft.tagName?new Promise(aa=>{var Q;let ab=!1,ac=!0;("decode"in(Q=this.Ft)?Q.decode():Q.complete?Promise.resolve(Q):new Promise((ab,aa)=>{Q.onload=()=>ab(Q),Q.onerror=aa})).finally(()=>{ab=!0,ac||aa()}),setTimeout(()=>{ac=!1,ab&&aa()},50),setTimeout(aa,250)}).finally(()=>this.Ht()):this.Ht()}Ht(){this.pswp.element.style.setProperty("--pswp-transition-duration",this.Et+"ms"),this.pswp.dispatch(this.isOpening?"openingAnimationStart":"closingAnimationStart"),this.pswp.dispatch("initialZoom"+(this.isOpening?"In":"Out")),this.pswp.element.classList[this.isOpening?"add":"remove"]("pswp--ui-visible"),this.isOpening?(this.Ft&&(this.Ft.style.opacity="1"),this.Kt()):this.isClosing&&this.Wt(),this.Ot||this.jt()}jt(){let{pswp:Q}=this;this.isOpen=this.isOpening,this.isClosed=this.isClosing,this.isOpening=!1,this.isClosing=!1,Q.dispatch(this.isOpen?"openingAnimationEnd":"closingAnimationEnd"),Q.dispatch("initialZoom"+(this.isOpen?"InEnd":"OutEnd")),this.isClosed?Q.destroy():this.isOpen&&(this.Bt&&(Q.container.style.overflow="visible",Q.container.style.width="100%"),Q.currSlide.applyCurrentZoomPan())}Kt(){let{pswp:Q}=this;this.Bt&&(this.kt&&(this.Xt(this.Vt,"transform","translate3d(0,0,0)"),this.Xt(this.Ut,"transform","none")),Q.currSlide.zoomAndPanToInitial(),this.Xt(Q.currSlide.container,"transform",Q.currSlide.getCurrentTransform())),this.Nt&&this.Xt(Q.bg,"opacity",String(Q.options.bgOpacity)),this.Rt&&this.Xt(Q.element,"opacity","1")}Wt(){let{pswp:Q}=this;this.Bt&&this.qt(!0),this.Nt&&Q.bgOpacity>.01&&this.Xt(Q.bg,"opacity","0"),this.Rt&&this.Xt(Q.element,"opacity","0")}qt(ac){if(!this.At)return;let{pswp:ah}=this,{innerRect:Q}=this.At,{currSlide:aa,viewportSize:ab}=ah;if(this.kt){let ad=-ab.x+(this.At.x-Q.x)+Q.w,ae=-ab.y+(this.At.y-Q.y)+Q.h,af=ab.x-Q.w,ag=ab.y-Q.h;ac?(this.Xt(this.Vt,"transform",o(ad,ae)),this.Xt(this.Ut,"transform",o(af,ag))):(r(this.Vt,ad,ae),r(this.Ut,af,ag))}i(aa.pan,Q||this.At),aa.currZoomLevel=this.At.w/aa.width,ac?this.Xt(aa.container,"transform",aa.getCurrentTransform()):aa.applyCurrentZoomPan()}Xt(Q,aa,ab){if(!this.Et)return void(Q.style[aa]=ab);let{animations:ad}=this.pswp,ac={duration:this.Et,easing:this.pswp.options.easing,onComplete:()=>{ad.activeAnimations.length||this.jt()},target:Q};ac[aa]=ab,ad.startTransition(ac)}}function X(Q,aa){let ab=aa.getItemData(Q);if(!aa.dispatch("lazyLoadSlide",{index:Q,itemData:ab}).defaultPrevented)return function(ab,aa,ae){let Q=aa.createContentFromData(ab,ae);if(!Q||!Q.lazyLoad)return;let{options:ac}=aa,af=_(ac,aa.viewportSize||w(ac,aa),ab,ae),ad=new y(ac,ab,-1);return ad.update(Q.width,Q.height,af),Q.lazyLoad(),Q.setDisplayedSize(Math.ceil(Q.width*ad.initial),Math.ceil(Q.height*ad.initial)),Q}(ab,aa,Q)}class Y{constructor(Q){this.pswp=Q,this.limit=Math.max(Q.options.preload[0]+Q.options.preload[1]+1,5),this.Yt=[]}updateLazy(ab){let{pswp:aa}=this;if(aa.dispatch("lazyLoad").defaultPrevented)return;let{preload:ac}=aa.options,ad=void 0===ab||ab>=0,Q;for(Q=0;Q<=ac[1];Q++)this.loadSlideByIndex(aa.currIndex+(ad?Q:-Q));for(Q=1;Q<=ac[0];Q++)this.loadSlideByIndex(aa.currIndex+(ad?-Q:Q))}loadSlideByIndex(Q){Q=this.pswp.getLoopedIndex(Q);let aa=this.getContentByIndex(Q);aa||(aa=X(Q,this.pswp))&&this.addToCache(aa)}getContentBySlide(aa){let Q=this.getContentByIndex(aa.index);return Q||(Q=this.pswp.createContentFromData(aa.data,aa.index))&&this.addToCache(Q),Q&&Q.setSlide(aa),Q}addToCache(Q){if(this.removeByIndex(Q.index),this.Yt.push(Q),this.Yt.length>this.limit){let aa=this.Yt.findIndex(Q=>!Q.isAttached&&!Q.hasSlide);-1!==aa&&this.Yt.splice(aa,1)[0].destroy()}}removeByIndex(aa){let Q=this.Yt.findIndex(Q=>Q.index===aa);-1!==Q&&this.Yt.splice(Q,1)}getContentByIndex(Q){return this.Yt.find(aa=>aa.index===Q)}destroy(){this.Yt.forEach(Q=>Q.destroy()),this.Yt=null}}let $={allowPanToNext:!0,spacing:.1,loop:!0,pinchToClose:!0,closeOnVerticalDrag:!0,hideAnimationDuration:333,showAnimationDuration:333,zoomAnimationDuration:333,escKey:!0,arrowKeys:!0,returnFocus:!0,maxWidthToAnimate:4e3,clickToCloseNonZoomable:!0,imageClickAction:"zoom-or-close",bgClickAction:"close",tapAction:"toggle-controls",doubleTapAction:"zoom",indexIndicatorSep:" / ",preloaderDelay:2e3,bgOpacity:.8,index:0,errorMsg:"The image cannot be loaded",preload:[1,2],easing:"cubic-bezier(.4,0,.22,1)"};class J extends class extends class{constructor(){this.$t={},this.Jt={},this.pswp=void 0,this.options=void 0}addFilter(Q,aa,ab=100){this.Jt[Q]||(this.Jt[Q]=[]),this.Jt[Q].push({fn:aa,priority:ab}),this.Jt[Q].sort((Q,aa)=>Q.priority-aa.priority),this.pswp&&this.pswp.addFilter(Q,aa,ab)}removeFilter(Q,aa){this.Jt[Q]&&(this.Jt[Q]=this.Jt[Q].filter(Q=>Q.fn!==aa)),this.pswp&&this.pswp.removeFilter(Q,aa)}applyFilters(Q,...aa){return this.Jt[Q]&&this.Jt[Q].forEach(Q=>{aa[0]=Q.fn.apply(this,aa)}),aa[0]}on(Q,aa){this.$t[Q]||(this.$t[Q]=[]),this.$t[Q].push(aa),this.pswp&&this.pswp.on(Q,aa)}off(Q,aa){this.$t[Q]&&(this.$t[Q]=this.$t[Q].filter(Q=>aa!==Q)),this.pswp&&this.pswp.off(Q,aa)}dispatch(Q,aa){if(this.pswp)return this.pswp.dispatch(Q,aa);let ab=new H(Q,aa);return this.$t&&this.$t[Q]&&this.$t[Q].forEach(Q=>{Q.call(this,ab)}),ab}}{getNumItems(){let aa,{dataSource:Q}=this.options;Q?"length"in Q?aa=Q.length:"gallery"in Q&&(Q.items||(Q.items=this.Qt(Q.gallery)),Q.items&&(aa=Q.items.length)):aa=0;let ab=this.dispatch("numItems",{dataSource:Q,numItems:aa});return this.applyFilters("numItems",ab.numItems,Q)}createContentFromData(Q,aa){return new W(Q,this,aa)}getItemData(aa){let{dataSource:Q}=this.options,ac;Array.isArray(Q)?ac=Q[aa]:Q&&Q.gallery&&(Q.items||(Q.items=this.Qt(Q.gallery)),ac=Q.items[aa]);let ab=ac;ab instanceof Element&&(ab=this.ti(ab));let ad=this.dispatch("itemData",{itemData:ab||{},index:aa});return this.applyFilters("itemData",ad.itemData,aa)}Qt(Q){return this.options.children||this.options.childSelector?function(Q,ac,ad=document){let aa=[];if(Q instanceof Element)aa=[Q];else if(Q instanceof NodeList||Array.isArray(Q))aa=Array.from(Q);else{let ab="string"==typeof Q?Q:ac;ab&&(aa=Array.from(ad.querySelectorAll(ab)))}return aa}(this.options.children,this.options.childSelector,Q)||[]:[Q]}ti(ab){let Q={element:ab},aa="A"===ab.tagName?ab:ab.querySelector("a");if(aa){Q.src=aa.dataset.pswpSrc||aa.href,aa.dataset.pswpSrcset&&(Q.srcset=aa.dataset.pswpSrcset),Q.width=parseInt(aa.dataset.pswpWidth,10),Q.height=parseInt(aa.dataset.pswpHeight,10),Q.w=Q.width,Q.h=Q.height,aa.dataset.pswpType&&(Q.type=aa.dataset.pswpType);let ac=ab.querySelector("img");ac&&(Q.msrc=ac.currentSrc||ac.src,Q.alt=ac.getAttribute("alt")),(aa.dataset.pswpCropped||aa.dataset.cropped)&&(Q.thumbCropped=!0)}return this.applyFilters("domItemData",Q,ab,aa)}}{constructor(Q){super(),this.ii(Q),this.offset={},this.si={},this.viewportSize={},this.bgOpacity=1,this.topBar=void 0,this.events=new f,this.animations=new L,this.mainScroll=new T(this),this.gestures=new C(this),this.opener=new j(this),this.keyboard=new D(this),this.contentLoader=new Y(this)}init(){if(this.isOpen||this.isDestroying)return;this.isOpen=!0,this.dispatch("init"),this.dispatch("beforeOpen"),this.hi();let Q="pswp--open";return this.gestures.supportsTouch&&(Q+=" pswp--touch"),this.options.mainClass&&(Q+=" "+this.options.mainClass),this.element.className+=" "+Q,this.currIndex=this.options.index||0,this.potentialIndex=this.currIndex,this.dispatch("firstUpdate"),this.scrollWheel=new k(this),(Number.isNaN(this.currIndex)||this.currIndex<0||this.currIndex>=this.getNumItems())&&(this.currIndex=0),this.gestures.supportsTouch||this.mouseDetected(),this.updateSize(),this.offset.y=window.pageYOffset,this.ei=this.getItemData(this.currIndex),this.dispatch("gettingData",{index:this.currIndex,data:this.ei,slide:void 0}),this.Zt=this.getThumbBounds(),this.dispatch("initialLayout"),this.on("openingAnimationEnd",()=>{this.setContent(this.mainScroll.itemHolders[0],this.currIndex-1),this.setContent(this.mainScroll.itemHolders[2],this.currIndex+1),this.mainScroll.itemHolders[0].el.style.display="block",this.mainScroll.itemHolders[2].el.style.display="block",this.appendHeavy(),this.contentLoader.updateLazy(),this.events.add(window,"resize",this.ni.bind(this)),this.events.add(window,"scroll",this.oi.bind(this)),this.dispatch("bindEvents")}),this.setContent(this.mainScroll.itemHolders[1],this.currIndex),this.dispatch("change"),this.opener.open(),this.dispatch("afterInit"),!0}getLoopedIndex(Q){let aa=this.getNumItems();return this.options.loop&&(Q>aa-1&&(Q-=aa),Q<0&&(Q+=aa)),Q=n(Q,0,aa-1)}appendHeavy(){this.mainScroll.itemHolders.forEach(Q=>{Q.slide&&Q.slide.appendHeavy()})}goTo(Q){this.mainScroll.moveIndexBy(this.getLoopedIndex(Q)-this.potentialIndex)}next(){this.goTo(this.potentialIndex+1)}prev(){this.goTo(this.potentialIndex-1)}zoomTo(...Q){this.currSlide.zoomTo(...Q)}toggleZoom(){this.currSlide.toggleZoom()}close(){this.opener.isOpen&&!this.isDestroying&&(this.isDestroying=!0,this.dispatch("close"),this.events.removeAll(),this.opener.close())}destroy(){if(!this.isDestroying)return this.options.showHideAnimationType="none",void this.close();this.dispatch("destroy"),this.listeners=null,this.scrollWrap.ontouchmove=null,this.scrollWrap.ontouchend=null,this.element.remove(),this.mainScroll.itemHolders.forEach(Q=>{Q.slide&&Q.slide.destroy()}),this.contentLoader.destroy(),this.events.removeAll()}refreshSlideContent(Q){this.contentLoader.removeByIndex(Q),this.mainScroll.itemHolders.forEach((aa,ac)=>{let ab=this.currSlide.index-1+ac;this.canLoop()&&(ab=this.getLoopedIndex(ab)),ab===Q&&(this.setContent(aa,Q,!0),1===ac&&(this.currSlide=aa.slide,aa.slide.setIsActive(!0)))}),this.dispatch("change")}setContent(Q,aa,ab){if(this.canLoop()&&(aa=this.getLoopedIndex(aa)),Q.slide){if(Q.slide.index===aa&&!ab)return;Q.slide.destroy(),Q.slide=null}if(!this.canLoop()&&(aa<0||aa>=this.getNumItems()))return;let ac=this.getItemData(aa);Q.slide=new b(ac,aa,this),aa===this.currIndex&&(this.currSlide=Q.slide),Q.slide.append(Q.el)}getViewportCenterPoint(){return{x:this.viewportSize.x/2,y:this.viewportSize.y/2}}updateSize(aa){if(this.isDestroying)return;let Q=w(this.options,this);!aa&&e(Q,this.si)||(i(this.si,Q),this.dispatch("beforeResize"),i(this.viewportSize,this.si),this.oi(),this.dispatch("viewportSize"),this.mainScroll.resize(this.opener.isOpen),!this.hasMouse&&window.matchMedia("(any-hover: hover)").matches&&this.mouseDetected(),this.dispatch("resize"))}applyBgOpacity(Q){this.bgOpacity=Math.max(Q,0),this.bg.style.opacity=String(this.bgOpacity*this.options.bgOpacity)}mouseDetected(){this.hasMouse||(this.hasMouse=!0,this.element.classList.add("pswp--has_mouse"))}ni(){this.updateSize(),/iPhone|iPad|iPod/i.test(window.navigator.userAgent)&&setTimeout(()=>{this.updateSize()},500)}oi(){this.setScrollOffset(0,window.pageYOffset)}setScrollOffset(Q,aa){this.offset.x=Q,this.offset.y=aa,this.dispatch("updateScrollOffset")}hi(){this.element=t("pswp"),this.element.setAttribute("tabindex","-1"),this.element.setAttribute("role","dialog"),this.template=this.element,this.bg=t("pswp__bg",!1,this.element),this.scrollWrap=t("pswp__scroll-wrap",!1,this.element),this.container=t("pswp__container",!1,this.scrollWrap),this.mainScroll.appendHolders(),this.ui=new q(this),this.ui.init(),(this.options.appendToEl||document.body).appendChild(this.element)}getThumbBounds(){return function(ad,Q,aa){let ae=aa.dispatch("thumbBounds",{index:ad,itemData:Q,instance:aa});if(ae.thumbBounds)return ae.thumbBounds;let{element:ac}=Q,af,ab;if(ac&& !1!==aa.options.thumbSelector){let ag=aa.options.thumbSelector||"img";ab=ac.matches(ag)?ac:ac.querySelector(ag)}return(ab=aa.applyFilters("thumbEl",ab,Q,ad))&&(af=Q.thumbCropped?function(ai,aa,ac){let Q=ai.getBoundingClientRect(),ad=Q.width/aa,ae=Q.height/ac,ab=ad>ae?ad:ae,af=(Q.width-aa*ab)/2,ag=(Q.height-ac*ab)/2,ah={x:Q.left+af,y:Q.top+ag,w:aa*ab};return ah.innerRect={w:Q.width,h:Q.height,x:af,y:ag},ah}(ab,Q.width||Q.w,Q.height||Q.h):function(aa){let Q=aa.getBoundingClientRect();return{x:Q.left,y:Q.top,w:Q.width}}(ab)),aa.applyFilters("thumbBounds",af,Q,ad)}(this.currIndex,this.currSlide?this.currSlide.data:this.ei,this)}canLoop(){return this.options.loop&&this.getNumItems()>2}ii(Q){window.matchMedia("(prefers-reduced-motion), (update: slow)").matches&&(Q.showHideAnimationType="none",Q.zoomAnimationDuration=0),this.options={...$,...Q}}}export{J as default}
